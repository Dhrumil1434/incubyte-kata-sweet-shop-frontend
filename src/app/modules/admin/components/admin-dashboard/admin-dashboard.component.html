<div class="admin-dashboard">
  <div class="dashboard-header">
    <div class="header-content">
      <h1>Admin Dashboard</h1>
      <p>Welcome back, {{ currentUser?.userName || 'Admin' }}!</p>
    </div>
    <div class="header-actions">
      <div class="action-buttons">
        <p-button
          label="Manage Sweets"
          icon="pi pi-box"
          severity="success"
          [routerLink]="['/admin/sweets']"
          class="nav-btn"
        >
        </p-button>
        <p-button
          label="Manage Categories"
          icon="pi pi-tags"
          severity="info"
          [routerLink]="['/admin/categories']"
          class="nav-btn"
        >
        </p-button>
        <p-button
          label="Manage Users"
          icon="pi pi-users"
          severity="help"
          [routerLink]="['/admin/users']"
          class="nav-btn"
        >
        </p-button>
        <p-button
          label="View Purchases"
          icon="pi pi-shopping-cart"
          severity="help"
          [routerLink]="['/admin/purchases']"
          class="nav-btn"
        >
        </p-button>
        <p-button
          label="Test Backend"
          icon="pi pi-cog"
          severity="secondary"
          [routerLink]="['/admin/backend-test']"
          class="nav-btn"
        >
        </p-button>
      </div>
      <p-button
        label="Logout"
        icon="pi pi-sign-out"
        severity="secondary"
        [text]="true"
        (onClick)="onLogout()"
        class="logout-btn"
      >
      </p-button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <p-card class="stat-card">
      <div class="stat-content">
        <div class="stat-icon">
          <i class="pi pi-users"></i>
        </div>
        <div class="stat-info">
          <h3>{{ stats.totalUsers }}</h3>
          <p>Total Users</p>
        </div>
      </div>
    </p-card>

    <p-card class="stat-card">
      <div class="stat-content">
        <div class="stat-icon">
          <i class="pi pi-box"></i>
        </div>
        <div class="stat-info">
          <h3>{{ stats.totalSweets }}</h3>
          <p>Total Sweets</p>
        </div>
      </div>
    </p-card>

    <p-card class="stat-card">
      <div class="stat-content">
        <div class="stat-icon">
          <i class="pi pi-shopping-cart"></i>
        </div>
        <div class="stat-info">
          <h3>{{ stats.totalOrders }}</h3>
          <p>Total Orders</p>
        </div>
      </div>
    </p-card>

    <p-card class="stat-card">
      <div class="stat-content">
        <div class="stat-icon">
          <i class="pi pi-dollar"></i>
        </div>
        <div class="stat-info">
          <h3>${{ stats.totalRevenue | number: '1.2-2' }}</h3>
          <p>Total Revenue</p>
        </div>
      </div>
    </p-card>
  </div>

  <!-- Charts and Tables -->
  <div class="dashboard-content">
    <div class="chart-section">
      <p-card>
        <ng-template pTemplate="header">
          <h3>Revenue & Orders Trend</h3>
        </ng-template>
        <p-chart
          type="line"
          [data]="chartData"
          [options]="chartOptions"
        ></p-chart>
      </p-card>
    </div>

    <div class="tables-section">
      <div class="table-container">
        <p-card>
          <ng-template pTemplate="header">
            <h3>Recent Users</h3>
          </ng-template>
          <p-table [value]="recentUsers" [paginator]="true" [rows]="5">
            <ng-template pTemplate="header">
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Role</th>
                <th>Status</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-user>
              <tr>
                <td>{{ user.name }}</td>
                <td>{{ user.email }}</td>
                <td>
                  <p-tag
                    [value]="getRoleLabel(user.role)"
                    [severity]="user.role === 'admin' ? 'danger' : 'info'"
                  ></p-tag>
                </td>
                <td>
                  <p-tag
                    [value]="user.status"
                    [severity]="getStatusSeverity(user.status)"
                  ></p-tag>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </p-card>
      </div>

      <div class="table-container">
        <p-card>
          <ng-template pTemplate="header">
            <h3>Recent Orders</h3>
          </ng-template>
          <p-table [value]="recentOrders" [paginator]="true" [rows]="5">
            <ng-template pTemplate="header">
              <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Total</th>
                <th>Status</th>
                <th>Date</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-order>
              <tr>
                <td>#{{ order.id }}</td>
                <td>{{ order.customer }}</td>
                <td>${{ order.total | number: '1.2-2' }}</td>
                <td>
                  <p-tag
                    [value]="order.status"
                    [severity]="getStatusSeverity(order.status)"
                  ></p-tag>
                </td>
                <td>{{ order.date | date: 'short' }}</td>
              </tr>
            </ng-template>
          </p-table>
        </p-card>
      </div>
    </div>
  </div>
</div>
